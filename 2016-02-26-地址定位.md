# 地址定位

## 定位

* GPS定位(native支持)
* Wifi定位(native支持)
* 基站定位(native支持)
* ip定位(服务端支持)

## 做一个移动端拖动地图选择地址需要用到的文档

* [IP定位API(通过IP获取所在省市名称和GPS)](http://lbsyun.baidu.com/index.php?title=webapi/ip-api)
* [类参考(map类调用获取中心点经纬度方法)](http://developer.baidu.com/map/reference/index.php)
* [Geocoding API(通过GPS获取推荐地址列表)](http://lbsyun.baidu.com/index.php?title=webapi/guide/webservice-geocoding)

## 2013-07-09 lbs中从库中查询某经纬度2KM范围内的数据

```sql
$sql='select * from users_location where
latitude > '.$lat.'-1 and
latitude < '.$lat.'+1 and
longitude > '.$lon.'-1 and
longitude < '.$lon.'+1
order by ACOS(SIN(('.$lat.' * 3.1415) / 180 ) *SIN((latitude * 3.1415) / 180 ) +COS(('.$lat.' * 3.1415) / 180 ) * COS((latitude * 3.1415) / 180 ) *COS(('.$lon.'* 3.1415) / 180 - (longitude * 3.1415) / 180 ) ) * 6380 asc limit 10';
```

> [laserdance](http://m.oschina.net/blog/40854)
