# node.js

**node.js global modules** `/usr/local/lib/node_modules`

* [Installing Node.js via package manager](https://nodejs.org/en/download/package-manager/)
* [Node-config ->所有 node 应用使用一致的配置](https://github.com/lorenwest/node-config)
* `EventEmitter.prototype.on ===EventEmitter.prototype.addListener`

Node里面标准的回调函数的第一个参数都是 error

## apis

* [child_process](https://nodejs.org/api/child_process.html)
  * exec, execFile, fork, execSync, execFileSync 是基于 spawn 和 spanwSync 实现的
* [get home dir](https://nodejs.org/api/os.html#os_os_homedir)
* fs
  `fs.stat`: return information about a file
  `fs.createWriteStream` 创建一个写入数据流对象，该对象的write方法用于写入数据，end方法用于结束写入操作(多用于大文件的写入z)
  * [node-fs-extra](https://github.com/jprichardson/node-fs-extra) fs 的扩展
* 路径相关
  __dirname：    获得当前执行文件所在目录的完整目录名
  __filename：   获得当前执行文件的带有完整绝对路径的文件名
  process.cwd()：获得当前执行node命令时候的文件夹目录名
  ./：           文件所在目录
  * [path.join()](http://nodejs.cn/api/path.html#path_path_join_paths)
  * [path.resolve()](http://nodejs.cn/api/path.html#path_path_resolve_paths)
    * 与 `path.join()` 不同, 其结果一定会是绝对路径
    * 如果处理完全部给定的 path 片段后还未生成一个绝对路径，则当前工作目录会被用上
    * 生成的路径是规范化后的，且末尾的斜杠会被删除(根目录除外)
  * `url.resolve()` 与前两者不同, 他只有两个参数, 且第二个参数如果以 `/` 开头会覆盖第一个参数(到 protocol + host 为止)
* Cluster 集群
  * pm2 实现了 cluster 的抽象
  * 类似于 web worker?! 但是 worker 开的是线程, 这个是进程
* Buffer
  * Buffer是个全局对象，可直接使用来创建二进制数据
  * fs 模块的 readFile 方法回调中的data就是个Buffer

> [nodejs学习之文件上传 by W·Axes](https://www.cnblogs.com/axes/p/4308430.html)

## frameworks

* koa
  * 在 `async`, `await` 进入标准后再使用 koa2
* express

## pm2

一个 process manager

* pm2 的 watcher 有的时候不工作, 需要 `pm2 stop name --watch` 再开才可以, 暂不明原因
* pm2 在 docker 里运行要加上 `--no-daemon`, 且同时不能 watch, 所以在开发的时候还是用更轻量的 nodemon 吧